{"version":3,"sources":["scripts/app.js"],"names":["angular","module","navbar","NavbarController","moment","$http","search","query","length","url","get","then","res","vm","searchRes","data","parseSearch","obj","isObject","show","externals","imdb","name","this","searchText","$inject","directive","restrict","templateUrl","scope","controller","controllerAs","bindToController","ShowController","$stateParams","lodash","$window","space","toJson","setEpisode","ep","currentEpisode","el","document","querySelector","element","scrollLeft","innerWidth","scrollBack","activate","api","id","episodes","getEpisodes","selection","eps","grouped","_","groupBy","moreGrouped","Object","keys","map","index","season","sortedSeason","sortBy","number","MainController","toastr","showData","error","err","showToastr","info","creationDate","showlist","runBlock","$log","debug","run","routerConfig","$stateProvider","$urlRouterProvider","state","otherwise","config","constant","$logProvider","toastrConfig","debugEnabled","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","$templateCache","put"],"mappings":"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","file":"scripts/app-6262b6aaf1.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('palomitasClient2', [\n      'ui.router', \n      'ui.bootstrap', \n      'toastr', \n      'ngLodash',\n      'duScroll'\n    ]);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('palomitasClient2')\n    .directive('navbar', navbar);\n\n  /** @ngInject */\n  function navbar() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/navbar/navbar.html',\n      scope: {\n          \n      },\n      controller: NavbarController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function NavbarController(moment, $http) {\n      var vm = this;\n      vm.searchRes;\n      vm.searchText = \"\";\n      vm.search = search;\n      vm.parseSearch = parseSearch;\n      \n      function search(query){\n        if(!query || query.length < 2){\n          return;\n        }\n        var url = \"https://tvapi.fuken.xyz\"\n        url += \"/search?query=\"+query;\n        return $http.get(url).then(function(res){\n          vm.searchRes = res.data;\n          return res.data;\n        })\n      }\n      \n      function parseSearch(obj){\n        if(!angular.isObject(obj) ||\n           !obj.show || \n           !obj.show.externals || \n           !obj.show.externals.imdb){\n          return null;\n        }\n        return /*obj.show.externals.imdb+\": \"+*/ obj.show.name;\n      }\n      \n    }\n  }\n\n})();\n\n(function(){\n  'use strict';\n  \n  angular\n    .module('palomitasClient2')\n    .controller('ShowController', ShowController);\n    \n  /** @ngInject */\n  function ShowController($stateParams, $http, lodash, $window){\n    var vm = this;\n    var _  = lodash;\n    \n    vm.id = $stateParams.id;\n    vm.show;\n    vm.episodes  = [];\n    vm.selection = [];\n    vm.currentEpisode;\n    \n    vm.space  = space;\n    vm.setEpisode = setEpisode;    \n    vm.scrollBack = scrollBack;\n    \n    activate();\n    \n    // PUBLIC METHODS\n    \n    function space(obj){\n      return angular.toJson(obj, true);\n    }\n    \n    function setEpisode(ep){\n      vm.currentEpisode = ep;\n      var el = document.querySelector(\".episodes\");\n      angular.element(el).scrollLeft($window.innerWidth, 400);\n    }\n    \n    function scrollBack(){\n      var el = document.querySelector(\".episodes\");\n      angular.element(el).scrollLeft(0, 400);\n    }\n    \n    // PRIVATE METHODS\n    \n    function activate(){\n      var api = \"https://api-fetch.website/tv/\";\n      var url = api+\"/show/\"+vm.id;\n      $http.get(url).then(function(res){\n        vm.show = res.data;\n        vm.episodes = getEpisodes(res.data);\n        vm.selection = vm.episodes[0].episodes;\n        vm.currentEpisode = vm.selection[0];\n      })\n    }\n    \n    function getEpisodes(show){\n      var eps = show.episodes;\n      var grouped = _.groupBy(eps, 'season');\n      var moreGrouped = Object.keys(grouped).map(function(index){\n        var season = grouped[index];\n        var sortedSeason = _.sortBy(season, 'episode');\n        return { number: sortedSeason[0].season, episodes: sortedSeason };\n      });\n      return moreGrouped;\n    }\n    \n    \n    \n  }\n  \n})();\n(function() {\n  'use strict';\n\n  angular\n    .module('palomitasClient2')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController(toastr, $http) {\n    var vm = this;\n    var api = \"https://tvapi.fuken.xyz\"\n\n    vm.creationDate = 1463518051145;\n    vm.showData = null;\n    vm.error = null;\n\n    vm.showToastr = showToastr;\n    vm.showlist = function(){};\n\n    activate();\n\n    function activate(){\n      $http.get(api+\"/shows\")\n        .then(function(res){\n          vm.showData = res.data;\n          vm.error = null;\n        })\n        .catch(function(err){\n          vm.error = err;\n        });\n    }\n\n    function showToastr() {\n      toastr.info('Fork <a href=\"https://github.com/Swiip/generator-gulp-angular\" target=\"_blank\"><b>generator-gulp-angular</b></a>');\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('palomitasClient2')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log) {\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('palomitasClient2')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'vm'\n      })\n      .state('show_detail', {\n        url:'/show/:id',\n        templateUrl: 'app/show/show.detail.html',\n        controller: 'ShowController',\n        controllerAs: 'vm'\n      });\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global malarkey:false, moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('palomitasClient2')\n    .constant('moment', moment);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('palomitasClient2')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, toastrConfig) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    // Set options third-party lib\n    toastrConfig.allowHtml = true;\n    toastrConfig.timeOut = 3000;\n    toastrConfig.positionClass = 'toast-top-right';\n    toastrConfig.preventDuplicates = true;\n    toastrConfig.progressBar = true;\n  }\n\n})();\n\nangular.module(\"palomitasClient2\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<main style=\\\"padding: 1.2em\\\"><h1 class=\\\"text-center header-shadow\\\">Proyecto Palomitas</h1><h2 class=text-center>El poder de la red P2P en tu navegador</h2><div class=row><h3 class=\\\"col-sm-3 col-xs-6 p1em text-center\\\"><span class=\\\"header-icon glyphicon glyphicon-fire\\\"></span><br><span>Las utlimas novedades</span></h3><h3 class=\\\"col-sm-3 col-xs-6 p1em text-center\\\"><span class=\\\"header-icon glyphicon glyphicon-film\\\"></span><br><span>Todas las series en version original</span></h3><h3 class=\\\"col-sm-3 col-xs-6 p1em text-center\\\"><span class=\\\"header-icon glyphicon glyphicon-globe\\\"></span><br><span>Subtitulos en todos los idiomas</span></h3><h3 class=\\\"col-sm-3 col-xs-6 p1em text-center\\\"><span class=\\\"header-icon glyphicon glyphicon-cloud\\\"></span><br>Proyecto de codigo abierto. Haz <a href=http://github.com/juandjara/palomitas-angular>tus propias palomitas</a></h3></div><!-- Solo se muestra mientras se realiza la peticion inicial --><h1 style=\\\"color: lightgrey\\\" ng-hide=vm.showData>Loading...</h1><!-- Solo se muestra si la peticion inicial tuvo exito --><div class=row ng-show=vm.showData><h1 class=\\\"col-sm-12 header-shadow\\\">Las series más populares:</h1><div class=\\\"col-sm-12 shows\\\" ng-show=vm.showData><div class=show-card ng-repeat=\\\"show in vm.showData |limitTo: 15\\\" ng-cloak><div class=show-img><img ng-src={{show.image.medium}} alt={{show.name}}></div><div class=overlay><div class=\\\"ribbon opensans\\\"><p>{{show.name}}</p><p class=badge style=\\\"font-size: smaller\\\">{{show.rating.average}} / 10</p><a ng-href=#/show/{{show.externals.imdb}} class=\\\"no-br btn btn-lg btn-success\\\">Detalles</a></div></div></div></div></div><!-- Solo se muestra si la peticion inicial falló --><div style=\\\"text-align: left\\\" ng-show=vm.error><p>Error</p><pre>\\n      {{vm.error | json}}\\n    </pre></div></main>\");\n$templateCache.put(\"app/show/show.detail.html\",\"<div class=show-details><div class=show-img><img ng-src={{vm.show.images.banner}} alt={{vm.show.title}}></div><div class=overlay><img class=\\\"poster hidden-xs\\\" ng-src={{vm.show.images.poster}} alt={{vm.show.title}}><header class=header><h1>{{vm.show.title}} <span class=badge>{{vm.show.rating.percentage / 10}} / 10</span></h1><h4><p>{{vm.show.year}} - {{vm.show.status}}</p><span ng-repeat=\\\"genre in vm.show.genres\\\">{{genre}} <span ng-hide=$last>,</span></span></h4><p style=\\\"font-weight: bolder\\\" class=opensans>{{vm.show.synopsis}}</p></header></div></div><div class=opensans style=\\\"margin-top: 1em; padding: 0 1em\\\"><h1 style=\\\"margin-top: 0; margin-bottom: .5em\\\">Episodios</h1><div class=episodes><div class=episode-selector><div class=\\\"season-list btn-group-vertical\\\"><button class=\\\"btn btn-primary\\\" ng-repeat=\\\"season in vm.episodes\\\" ng-click=\\\"vm.selection = season.episodes\\\">Temporada {{season.number}}</button></div><ul class=\\\"episode-list list-group\\\" style=\\\"margin-left: 1em\\\"><li class=list-group-item style=\\\"color: black\\\" ng-repeat=\\\"ep in vm.selection\\\"><a href ng-click=vm.setEpisode(ep)>{{ep.season}}x{{ep.episode}} - {{ep.title}}</a></li></ul></div><div class=episode><button class=\\\"visible-xs btn btn-primary\\\" style=\\\"margin-top: 1em\\\" ng-click=vm.scrollBack()><span class=\\\"glyphicon glyphicon-chevron-left\\\"></span> Atrás</button><h2 style=\\\"margin-top: 0.2em\\\">{{vm.currentEpisode.title}}</h2><p style=\\\"color: grey\\\">Season {{vm.currentEpisode.season}} Episode {{vm.currentEpisode.episode}}</p><p>{{vm.currentEpisode.overview}}</p><br><uib-tabset><uib-tab ng-repeat=\\\"(type, torrent) in vm.currentEpisode.torrents\\\" index=$index heading={{type}} ng-if=\\\"type != 0\\\"><div class=tab-inner><p>seeds: {{torrent.seeds}} | peers: {{torrent.peers}}</p><pre class=pre-wrap>{{torrent.url}}</pre></div></uib-tab></uib-tabset><p><br>Puede usar este <em>magnet link</em> para ver el episodio usando <a href=https://peerflix-server.herokuapp.com>Peerflix server</a><br>Pegue alli el <em>magnet link</em> y podra ver el progreso del torrent<br>Pasados unos segundos podra ver el progreso de la descarga del torrent y una lista de enlaces a los archivos que contiene este torrent.<br>Podra usar el enlace del archivo de video para ver el episodio en un reproductor como <em>VLC</em> o <em>MPV</em></p></div></div></div>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<nav class=nav-bar><a href=# class=nav-logo><img class=nav-icon alt=\\\"Logo de Palomitas\\\" src=assets/images/popcorn-icon.png> <span>Palomitas</span></a><section class=nav-search><input type=text placeholder=\\\"¿Que quieres ver?\\\" class=transparent ng-model=vm.searchText ng-model-options=\\\"{debounce: 300}\\\" typeahead-no-results=\\\"\\'No results\\'\\\" uib-typeahead=\\\"option as vm.parseSearch(option) for option in vm.search($viewValue)\\\" typeahead-template-url=app/components/navbar/searchItem.html typeahead-popup-template-url=app/components/navbar/searchPopup.html> <span class=\\\"glyphicon glyphicon-search inside-input\\\"></span></section></nav>\");\n$templateCache.put(\"app/components/navbar/searchItem.html\",\"<div ng-attr-title={{match.label}} class=search-item ng-cloak><img class=search-img ng-src={{match.model.show.image.medium}}> <a ng-href=#/show/{{match.model.show.externals.imdb}} class=search-label>{{match.model.show.name}}</a></div>\");\n$templateCache.put(\"app/components/navbar/searchPopup.html\",\"<ul class=\\\"list-unstyled search-results\\\" ng-show=\\\"isOpen() && !moveInProgress\\\" ng-style=\\\"{top: position().top+\\'px\\',\\n               left: position().left+\\'px\\'}\\\" role=listbox aria-hidden={{!isOpen()}}><li ng-repeat=\\\"match in matches track by $index\\\" ng-class=\\\"{active: isActive($index) }\\\" ng-mouseenter=selectActive($index) ng-click=\\\"selectMatch($index, $event)\\\" role=option id={{::match.id}}><div uib-typeahead-match index=$index match=match query=query template-url=templateUrl></div></li></ul>\");}]);"],"sourceRoot":"/source/"}